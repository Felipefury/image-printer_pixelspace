"dmFyIGNhbnZhc19qb2dvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRlZmF1bHRDYW52YXMxIik7IHZhciBjb250ZXh0X2pvZ28gPSBjYW52YXNfam9nby5nZXRDb250ZXh0KCIyZCIpOyB2YXIgeCx5LHcsaCxpbWdMb2FkOyBkcmF3SW1hZ2UgPSBmdW5jdGlvbigpIHsgbGV0IFhYID0gKHggLSB0aWxlZC5sZWZ0VG9wWCkgKnpvb20gbGV0IFlZID0gKHkgLSB0aWxlZC5sZWZ0VG9wWSkgKnpvb20gY29udGV4dF9qb2dvLmdsb2JhbEFscGhhID0gLjU7IGNvbnRleHRfam9nby5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZTsgY29udGV4dF9qb2dvLmRyYXdJbWFnZShpbWdMb2FkLCBYWCwgWVksIHcgKiB6b29tLGggKiB6b29tKTsgaWYoem9vbSA8PSA0KSB7IGNvbnRleHRfam9nby5saW5lV2lkdGggPSAiMSI7IH0gZWxzZSB7IGNvbnRleHRfam9nby5saW5lV2lkdGggPSAiMyI7IH07IGNvbnRleHRfam9nby5nbG9iYWxBbHBoYSA9IDE7IGNvbnRleHRfam9nby5iZWdpblBhdGgoKTsgY29udGV4dF9qb2dvLnN0cm9rZVN0eWxlID0gInJlZCI7IGNvbnRleHRfam9nby5yZWN0KFhYLCBZWSwgdyAqIHpvb20saCAqIHpvb20pOyBjb250ZXh0X2pvZ28uc3Ryb2tlKCk7IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZHJhd0ltYWdlKTsgfSBnZXREYXRhID0gZnVuY3Rpb24oKSB7IGxldCBjYW52YXNfam9nbzAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZGVmYXVsdENhbnZhczAiKTsgbGV0IGNvbnRleHRfam9nbzAgPSBjYW52YXNfam9nbzAuZ2V0Q29udGV4dCgiMmQiKTsgbGV0IFhYID0gKHggLSB0aWxlZC5sZWZ0VG9wWCkgKiB6b29tIGxldCBZWSA9ICh5IC0gdGlsZWQubGVmdFRvcFkpICogem9vbSBsZXQgaW1hZ2VDYW52YXNEYXRhID0gY29udGV4dF9qb2dvLmdldEltYWdlRGF0YShYWCwgWVksIHcsIGgpOyBsZXQgY2FudmFzRGF0YSA9IGNvbnRleHRfam9nbzAuZ2V0SW1hZ2VEYXRhKFhYLCBZWSwgdywgaCk7IGRhdGFQaXhlaXMuY29ycmVjdCA9IDA7IGRhdGFQaXhlaXMuZXJyb3JzID0gMDsgZm9yKGkgPSAwOyBpIDwgdyAqIGg7IGkrKykgeyBsZXQgckMgPSByZ2JUb0hleChpbWFnZUNhbnZhc0RhdGEuZGF0YVtpXSkgbGV0IGdDID0gcmdiVG9IZXgoaW1hZ2VDYW52YXNEYXRhLmRhdGFbaSArIDFdKSBsZXQgYkMgPSByZ2JUb0hleChpbWFnZUNhbnZhc0RhdGEuZGF0YVtpICsgMl0pIGxldCBySSA9IHJnYlRvSGV4KGNhbnZhc0RhdGEuZGF0YVtpXSkgbGV0IGdJID0gcmdiVG9IZXgoY2FudmFzRGF0YS5kYXRhW2kgKyAxXSkgbGV0IGJJID0gcmdiVG9IZXgoY2FudmFzRGF0YS5kYXRhW2kgKyAyXSkgbGV0IGNhbnZhc1RlbXBsYXRlID0gW3JDLGdDLGJDXSBsZXQgY2FudmFzR2FtZURhdGEgPSBbckksZ0ksYkldIGlmKGNhbnZhc1RlbXBsYXRlID09IGNhbnZhc0dhbWVEYXRhKSB7IGRhdGFQaXhlaXMuY29ycmVjdCsrIH0gZWxzZSB7IGRhdGFQaXhlaXMuZXJyb3JzKysgfTsgfSB9IGhhbmRsZUZpbGVTZWxlY3QgPSBmdW5jdGlvbihkYXRhKSB7IGlmKGltZ0xvYWQpIHJldHVybjsgbGV0IGZpbGUgPSBkYXRhLnRhcmdldC5maWxlc1swXTsgaWYoZmlsZS50eXBlICE9ICJpbWFnZS9wbmciKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmaWxlUCIpLnRleHRDb250ZW50ID0gInVzZSAucG5nIGltYWdlcyIgcmV0dXJuIH07IGlmKCF4IHx8ICF5KSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJYWUNvb3JkIikuc3R5bGUuY29sb3IgPSAicmVkIjsgcmV0dXJuIH07IHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOyByZWFkZXIub25sb2FkID0gKGZ1bmN0aW9uKHRoZUZpbGUpIHsgcmV0dXJuIGZ1bmN0aW9uKGUpIHsgbGV0IGltZyA9IG5ldyBJbWFnZSgpOyBpbWcuc3JjID0gZS50YXJnZXQucmVzdWx0OyBpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7IGggPSB0aGlzLmhlaWdodDsgdyA9IHRoaXMud2lkdGg7IGltZ0xvYWQgPSBpbWcgZHJhd0ltYWdlKCkgc2V0SW50ZXJ2YWwoKCkgPT4geyBnZXREYXRhKCkgfSwgMzAwMCk7IH07IH07IH0pKGZpbGUpOyByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsgfSB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7IGNvbnRhaW5lci5pbm5lckhUTUwgPSBgPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDoxMDBweCIgY2xhc3M9Im92ZXJsYXkiPjxwIHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7Zm9udC1zaXplOjE1cHgiIGlkPSJYWUNvb3JkIj5Vc2UgQiBrZXkgdG88YnI+ZGVmaW5lIHgsIHk8L3A+PHAgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjtmb250LXNpemU6MTVweCIgaWQ9ImZpbGVQIj5Vc2UgSiBrZXkgdG88YnI+b3BlbiBmaWxlPC9wPjxjYW52YXMgaWQ9IlRlbXBsYXRlIiB3aWR0aD0iMCIgaGVpZ2h0PSIwIj48L2NhbnZhcz48L2Rpdj48aW5wdXQgaWQ9ImJ0bmZpbGUiIHR5cGU9ImZpbGUiIHN0eWxlPSJtYXJnaW4tbGVmdDogMTVweDtvcGFjaXR5OjAiIHNpemU9IjEiPjwvaW5wdXQ+YDsgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250YWluZXIpOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYnRuZmlsZSIpLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsIGhhbmRsZUZpbGVTZWxlY3QsIGZhbHNlKTsgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigia2V5cHJlc3MiLCAoZXZlbnQpID0+IHsgaWYoZXZlbnQua2V5ID09ICJiIikgeyB4ID0gbGFzdFBvc1swXSB5ID0gbGFzdFBvc1sxXSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiWFlDb29yZCIpLnRleHRDb250ZW50ID0geCArICIsIiArIHkgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIlhZQ29vcmQiKS5zdHlsZS5jb2xvciA9ICIjZmZmZmZmIiB9IGVsc2UgaWYoZXZlbnQua2V5ID09ICJqIikgeyBpZigheCB8fCAheSkgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiWFlDb29yZCIpLnN0eWxlLmNvbG9yID0gInJlZCI7IHJldHVybiB9OyAkKCIjYnRuZmlsZSIpLmNsaWNrKCk7IH0gfSk7IA=="
